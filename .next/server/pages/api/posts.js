"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts";
exports.ids = ["pages/api/posts"];
exports.modules = {

/***/ "@next-auth/mongodb-adapter":
/*!*********************************************!*\
  !*** external "@next-auth/mongodb-adapter" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/mongodb-adapter");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_posts_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\posts.js */ \"(api)/./pages/api/posts.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_posts_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_posts_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/posts\",\n        pathname: \"/api/posts\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_posts_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBvc3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNwb3N0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRDtBQUNuRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUvPzRkYzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxwb3N0cy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Bvc3RzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcG9zdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n// This approach is taken from https://github.com/vercel/next.js/tree/canary/examples/with-mongodb\n\nconst uri = process.env.MONGODB_URI;\nconst options = {\n    useUnifiedTopology: true,\n    useNewUrlParser: true\n};\nlet client;\nlet clientPromise;\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please add your Mongo URI to .env.local\");\n}\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrR0FBa0c7QUFDN0Q7QUFFckMsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1DLFVBQVU7SUFDZEMsb0JBQW9CO0lBQ3BCQyxpQkFBaUI7QUFDbkI7QUFFQSxJQUFJQztBQUNKLElBQUlDO0FBRUosSUFBSSxDQUFDUCxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtJQUM1QixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJUixJQUFzQyxFQUFFO0lBQzFDLCtEQUErRDtJQUMvRCw2RUFBNkU7SUFDN0UsSUFBSSxDQUFDUyxPQUFPQyxtQkFBbUIsRUFBRTtRQUMvQkosU0FBUyxJQUFJUixnREFBV0EsQ0FBQ0MsS0FBS0k7UUFDOUJNLE9BQU9DLG1CQUFtQixHQUFHSixPQUFPSyxPQUFPO0lBQzdDO0lBQ0FKLGdCQUFnQkUsT0FBT0MsbUJBQW1CO0FBQzVDLE9BQU8sRUFJTjtBQUVELGlFQUFpRTtBQUNqRSw4REFBOEQ7QUFDOUQsaUVBQWVILGFBQWFBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLy4vbGliL21vbmdvZGIuanM/ZDkyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGFwcHJvYWNoIGlzIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzL3RyZWUvY2FuYXJ5L2V4YW1wbGVzL3dpdGgtbW9uZ29kYlxuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tIFwibW9uZ29kYlwiXG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJXG5jb25zdCBvcHRpb25zID0ge1xuICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbn1cblxubGV0IGNsaWVudFxubGV0IGNsaWVudFByb21pc2VcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgYWRkIHlvdXIgTW9uZ28gVVJJIHRvIC5lbnYubG9jYWxcIilcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcbiAgLy8gSW4gZGV2ZWxvcG1lbnQgbW9kZSwgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlIHNvIHRoYXQgdGhlIHZhbHVlXG4gIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXG4gIGlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcbiAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKVxuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKVxuICB9XG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZVxufSBlbHNlIHtcbiAgLy8gSW4gcHJvZHVjdGlvbiBtb2RlLCBpdCdzIGJlc3QgdG8gbm90IHVzZSBhIGdsb2JhbCB2YXJpYWJsZS5cbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucylcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcbn1cblxuLy8gRXhwb3J0IGEgbW9kdWxlLXNjb3BlZCBNb25nb0NsaWVudCBwcm9taXNlLiBCeSBkb2luZyB0aGlzIGluIGFcbi8vIHNlcGFyYXRlIG1vZHVsZSwgdGhlIGNsaWVudCBjYW4gYmUgc2hhcmVkIGFjcm9zcyBmdW5jdGlvbnMuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwidXJpIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwib3B0aW9ucyIsInVzZVVuaWZpZWRUb3BvbG9neSIsInVzZU5ld1VybFBhcnNlciIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJFcnJvciIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./lib/mongoose.js":
/*!*************************!*\
  !*** ./lib/mongoose.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initMongoose: () => (/* binding */ initMongoose)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function initMongoose() {\n    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState === 1) {\n        return mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.asPromise();\n    }\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29vc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRXpCLGVBQWVDO0lBQ3BCLElBQUlELDREQUFtQixDQUFDRyxVQUFVLEtBQUssR0FBRztRQUN4QyxPQUFPSCwwREFBbUIsQ0FBQ0ksU0FBUztJQUN0QztJQUNBLE1BQU1KLHVEQUFnQixDQUFDTSxRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d2l0dGVyLWNsb25lLy4vbGliL21vbmdvb3NlLmpzPzE2M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdE1vbmdvb3NlKCkge1xuICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgcmV0dXJuIG1vbmdvb3NlLmNvbm5lY3Rpb24uYXNQcm9taXNlKCk7XG4gIH1cbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSk7XG59Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiaW5pdE1vbmdvb3NlIiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJhc1Byb21pc2UiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongoose.js\n");

/***/ }),

/***/ "(api)/./models/Follower.js":
/*!****************************!*\
  !*** ./models/Follower.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst FollowerSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    source: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        required: true\n    },\n    destination: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        required: true\n    }\n});\nconst Follower = mongoose__WEBPACK_IMPORTED_MODULE_0__.models?.Follower || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Follower\", FollowerSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Follower);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvRm9sbG93ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlEO0FBRXpELE1BQU1JLGlCQUFpQixJQUFJRCw0Q0FBTUEsQ0FBQztJQUNoQ0UsUUFBUTtRQUFDQyxNQUFLTix1REFBYyxDQUFDUSxRQUFRO1FBQUVDLFVBQVM7SUFBSTtJQUNwREMsYUFBYTtRQUFDSixNQUFLTix1REFBYyxDQUFDUSxRQUFRO1FBQUVDLFVBQVM7SUFBSTtBQUMzRDtBQUVBLE1BQU1FLFdBQVdULDRDQUFNQSxFQUFFUyxZQUFZViwrQ0FBS0EsQ0FBQyxZQUFZRztBQUV2RCxpRUFBZU8sUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUvLi9tb2RlbHMvRm9sbG93ZXIuanM/YTQzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHttb2RlbCwgbW9kZWxzLCBTY2hlbWF9IGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBGb2xsb3dlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBzb3VyY2U6IHt0eXBlOm1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZXF1aXJlZDp0cnVlfSxcbiAgZGVzdGluYXRpb246IHt0eXBlOm1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZXF1aXJlZDp0cnVlfSxcbn0pO1xuXG5jb25zdCBGb2xsb3dlciA9IG1vZGVscz8uRm9sbG93ZXIgfHwgbW9kZWwoJ0ZvbGxvd2VyJywgRm9sbG93ZXJTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBGb2xsb3dlcjsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJtb2RlbCIsIm1vZGVscyIsIlNjaGVtYSIsIkZvbGxvd2VyU2NoZW1hIiwic291cmNlIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZXF1aXJlZCIsImRlc3RpbmF0aW9uIiwiRm9sbG93ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Follower.js\n");

/***/ }),

/***/ "(api)/./models/Like.js":
/*!************************!*\
  !*** ./models/Like.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst LikeSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    author: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        ref: \"User\"\n    },\n    post: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        ref: \"Post\"\n    }\n}, {\n    timestamps: true\n});\nconst Like = mongoose__WEBPACK_IMPORTED_MODULE_0__.models?.Like || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Like\", LikeSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Like);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvTGlrZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUQ7QUFFekQsTUFBTUksYUFBYSxJQUFJRCw0Q0FBTUEsQ0FBQztJQUM1QkUsUUFBUTtRQUFDQyxNQUFLTix1REFBYyxDQUFDUSxRQUFRO1FBQUVDLEtBQUs7SUFBTTtJQUNsREMsTUFBTTtRQUFDSixNQUFLTix1REFBYyxDQUFDUSxRQUFRO1FBQUVDLEtBQUs7SUFBTTtBQUNsRCxHQUFHO0lBQ0RFLFlBQVk7QUFDZDtBQUVBLE1BQU1DLE9BQU9WLDRDQUFNQSxFQUFFVSxRQUFRWCwrQ0FBS0EsQ0FBQyxRQUFRRztBQUUzQyxpRUFBZVEsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R3aXR0ZXItY2xvbmUvLi9tb2RlbHMvTGlrZS5qcz8zZDEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwge21vZGVsLCBtb2RlbHMsIFNjaGVtYX0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IExpa2VTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgYXV0aG9yOiB7dHlwZTptb25nb29zZS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcid9LFxuICBwb3N0OiB7dHlwZTptb25nb29zZS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUG9zdCd9LFxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbmNvbnN0IExpa2UgPSBtb2RlbHM/Lkxpa2UgfHwgbW9kZWwoJ0xpa2UnLCBMaWtlU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgTGlrZTsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJtb2RlbCIsIm1vZGVscyIsIlNjaGVtYSIsIkxpa2VTY2hlbWEiLCJhdXRob3IiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInBvc3QiLCJ0aW1lc3RhbXBzIiwiTGlrZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/Like.js\n");

/***/ }),

/***/ "(api)/./models/Post.js":
/*!************************!*\
  !*** ./models/Post.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst PostSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    author: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        ref: \"User\"\n    },\n    text: String,\n    likesCount: {\n        type: Number,\n        default: 0\n    },\n    commentsCount: {\n        type: Number,\n        default: 0\n    },\n    parent: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Types).ObjectId,\n        ref: \"Post\"\n    },\n    images: {\n        type: [\n            String\n        ]\n    }\n}, {\n    timestamps: true\n});\nconst Post = mongoose__WEBPACK_IMPORTED_MODULE_0__.models?.Post || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Post\", PostSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Post);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvUG9zdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUQ7QUFFekQsTUFBTUksYUFBYSxJQUFJRCw0Q0FBTUEsQ0FBQztJQUM1QkUsUUFBUTtRQUFDQyxNQUFLTix1REFBYyxDQUFDUSxRQUFRO1FBQUVDLEtBQUs7SUFBTTtJQUNsREMsTUFBTUM7SUFDTkMsWUFBWTtRQUFDTixNQUFLTztRQUFPQyxTQUFRO0lBQUM7SUFDbENDLGVBQWU7UUFBQ1QsTUFBS087UUFBT0MsU0FBUTtJQUFDO0lBQ3JDRSxRQUFRO1FBQUNWLE1BQUtOLHVEQUFjLENBQUNRLFFBQVE7UUFBRUMsS0FBSztJQUFNO0lBQ2xEUSxRQUFRO1FBQUNYLE1BQUs7WUFBQ0s7U0FBTztJQUFBO0FBQ3hCLEdBQUc7SUFDRE8sWUFBWTtBQUNkO0FBRUEsTUFBTUMsT0FBT2pCLDRDQUFNQSxFQUFFaUIsUUFBUWxCLCtDQUFLQSxDQUFDLFFBQVFHO0FBQzNDLGlFQUFlZSxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS8uL21vZGVscy9Qb3N0LmpzPzQ2YjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7bW9kZWwsIG1vZGVscywgU2NoZW1hfSBmcm9tIFwibW9uZ29vc2VcIjtcblxuY29uc3QgUG9zdFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBhdXRob3I6IHt0eXBlOm1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJ30sXG4gIHRleHQ6IFN0cmluZyxcbiAgbGlrZXNDb3VudDoge3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0sXG4gIGNvbW1lbnRzQ291bnQ6IHt0eXBlOk51bWJlcixkZWZhdWx0OjB9LFxuICBwYXJlbnQ6IHt0eXBlOm1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZWY6ICdQb3N0J30sXG4gIGltYWdlczoge3R5cGU6W1N0cmluZ119LFxufSwge1xuICB0aW1lc3RhbXBzOiB0cnVlLFxufSk7XG5cbmNvbnN0IFBvc3QgPSBtb2RlbHM/LlBvc3QgfHwgbW9kZWwoJ1Bvc3QnLCBQb3N0U2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFBvc3Q7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwibW9kZWwiLCJtb2RlbHMiLCJTY2hlbWEiLCJQb3N0U2NoZW1hIiwiYXV0aG9yIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ0ZXh0IiwiU3RyaW5nIiwibGlrZXNDb3VudCIsIk51bWJlciIsImRlZmF1bHQiLCJjb21tZW50c0NvdW50IiwicGFyZW50IiwiaW1hZ2VzIiwidGltZXN0YW1wcyIsIlBvc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Post.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @next-auth/mongodb-adapter */ \"@next-auth/mongodb-adapter\");\n/* harmony import */ var _next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_2__.MongoDBAdapter)(_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        })\n    ],\n    pages: {\n        signIn: \"/login\"\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        session: async ({ token, session })=>{\n            if (session?.user && token?.sub) {\n                session.user.id = token.sub;\n            }\n            return session;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFnQztBQUN1QjtBQUNHO0FBQ1Y7QUFFekMsTUFBTUksY0FBYztJQUN6QkMsU0FBU0gsMEVBQWNBLENBQUNDLG9EQUFhQTtJQUNyQ0csV0FBVztRQUNUTCxpRUFBY0EsQ0FBQztZQUNiTSxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtZQUN0Q0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0I7UUFDaEQ7S0FDRDtJQUNEQyxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1RGLFNBQVMsT0FBTyxFQUFDRyxLQUFLLEVBQUNILE9BQU8sRUFBQztZQUM3QixJQUFJQSxTQUFTSSxRQUFRRCxPQUFPRSxLQUFLO2dCQUMvQkwsUUFBUUksSUFBSSxDQUFDRSxFQUFFLEdBQUdILE1BQU1FLEdBQUc7WUFDN0I7WUFDQSxPQUFPTDtRQUNUO0lBQ0Y7QUFDRixFQUFFO0FBRUYsaUVBQWVmLGdEQUFRQSxDQUFDSSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdpdHRlci1jbG9uZS8uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0uanM/NTI3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCJcbmltcG9ydCB7TW9uZ29EQkFkYXB0ZXJ9IGZyb20gXCJAbmV4dC1hdXRoL21vbmdvZGItYWRhcHRlclwiO1xuaW1wb3J0IGNsaWVudFByb21pc2UgZnJvbSBcIi4uLy4uLy4uL2xpYi9tb25nb2RiXCJcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zID0ge1xuICBhZGFwdGVyOiBNb25nb0RCQWRhcHRlcihjbGllbnRQcm9taXNlKSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUXG4gICAgfSksXG4gIF0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2xvZ2luJyxcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgc2Vzc2lvbjogYXN5bmMgKHt0b2tlbixzZXNzaW9ufSkgPT4ge1xuICAgICAgaWYgKHNlc3Npb24/LnVzZXIgJiYgdG9rZW4/LnN1Yikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5zdWI7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoYXV0aE9wdGlvbnMpOyJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkdvb2dsZVByb3ZpZGVyIiwiTW9uZ29EQkFkYXB0ZXIiLCJjbGllbnRQcm9taXNlIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwicHJvdmlkZXJzIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwicGFnZXMiLCJzaWduSW4iLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJjYWxsYmFja3MiLCJ0b2tlbiIsInVzZXIiLCJzdWIiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ }),

/***/ "(api)/./pages/api/posts.js":
/*!****************************!*\
  !*** ./pages/api/posts.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongoose */ \"(api)/./lib/mongoose.js\");\n/* harmony import */ var _models_Post__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Post */ \"(api)/./models/Post.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].js\");\n/* harmony import */ var _models_Like__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../models/Like */ \"(api)/./models/Like.js\");\n/* harmony import */ var _models_Follower__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../models/Follower */ \"(api)/./models/Follower.js\");\n\n\n\n\n\n\nasync function handler(req, res) {\n    await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_0__.initMongoose)();\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.unstable_getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_3__.authOptions);\n    if (req.method === \"GET\") {\n        const { id } = req.query;\n        if (id) {\n            const post = await _models_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id).populate(\"author\").populate({\n                path: \"parent\",\n                populate: \"author\"\n            });\n            res.json({\n                post\n            });\n        } else {\n            const parent = req.query.parent || null;\n            const author = req.query.author;\n            let searchFilter;\n            if (!author && !parent) {\n                const myFollows = await _models_Follower__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find({\n                    source: session.user.id\n                }).exec();\n                const idsOfPeopleIFollow = myFollows.map((f)=>f.destination);\n                searchFilter = {\n                    author: [\n                        ...idsOfPeopleIFollow,\n                        session.user.id\n                    ]\n                };\n            }\n            if (author) {\n                searchFilter = {\n                    author\n                };\n            }\n            if (parent) {\n                searchFilter = {\n                    parent\n                };\n            }\n            const posts = await _models_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(searchFilter).populate(\"author\").populate({\n                path: \"parent\",\n                populate: \"author\"\n            }).sort({\n                createdAt: -1\n            }).limit(20).exec();\n            let postsLikedByMe = [];\n            if (session) {\n                postsLikedByMe = await _models_Like__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find({\n                    author: session.user.id,\n                    post: posts.map((p)=>p._id)\n                });\n            }\n            let idsLikedByMe = postsLikedByMe.map((like)=>like.post);\n            res.json({\n                posts,\n                idsLikedByMe\n            });\n        }\n    }\n    if (req.method === \"POST\") {\n        const { text, parent, images } = req.body;\n        const post = await _models_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create({\n            author: session.user.id,\n            text,\n            parent,\n            images\n        });\n        if (parent) {\n            const parentPost = await _models_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(parent);\n            parentPost.commentsCount = await _models_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].countDocuments({\n                parent\n            });\n            await parentPost.save();\n        }\n        res.json(post);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0NvbnRlbnQiOlsiaW1wb3J0IHtpbml0TW9uZ29vc2V9IGZyb20gXCIuLi8uLi9saWIvbW9uZ29vc2VcIjtcbmltcG9ydCBQb3N0IGZyb20gXCIuLi8uLi9tb2RlbHMvUG9zdFwiO1xuaW1wb3J0IHt1bnN0YWJsZV9nZXRTZXJ2ZXJTZXNzaW9ufSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQge2F1dGhPcHRpb25zfSBmcm9tIFwiLi9hdXRoL1suLi5uZXh0YXV0aF1cIjtcbmltcG9ydCBMaWtlIGZyb20gXCIuLi8uLi9tb2RlbHMvTGlrZVwiO1xuaW1wb3J0IEZvbGxvd2VyIGZyb20gXCIuLi8uLi9tb2RlbHMvRm9sbG93ZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBhd2FpdCBpbml0TW9uZ29vc2UoKTtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHVuc3RhYmxlX2dldFNlcnZlclNlc3Npb24ocmVxLHJlcyxhdXRoT3B0aW9ucyk7XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgY29uc3Qge2lkfSA9IHJlcS5xdWVyeTtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkKGlkKVxuICAgICAgICAucG9wdWxhdGUoJ2F1dGhvcicpXG4gICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgcGF0aDogJ3BhcmVudCcsXG4gICAgICAgICAgcG9wdWxhdGU6ICdhdXRob3InLFxuICAgICAgICB9KTtcbiAgICAgIHJlcy5qc29uKHtwb3N0fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHJlcS5xdWVyeS5wYXJlbnQgfHwgbnVsbDtcbiAgICAgIGNvbnN0IGF1dGhvciA9IHJlcS5xdWVyeS5hdXRob3I7XG4gICAgICBsZXQgc2VhcmNoRmlsdGVyO1xuICAgICAgaWYgKCFhdXRob3IgJiYgIXBhcmVudCkge1xuICAgICAgICBjb25zdCBteUZvbGxvd3MgPSBhd2FpdCBGb2xsb3dlci5maW5kKHtzb3VyY2U6c2Vzc2lvbi51c2VyLmlkfSkuZXhlYygpO1xuICAgICAgICBjb25zdCBpZHNPZlBlb3BsZUlGb2xsb3cgPSBteUZvbGxvd3MubWFwKGYgPT4gZi5kZXN0aW5hdGlvbik7XG4gICAgICAgIHNlYXJjaEZpbHRlciA9IHthdXRob3I6Wy4uLmlkc09mUGVvcGxlSUZvbGxvdyxzZXNzaW9uLnVzZXIuaWRdfTtcbiAgICAgIH1cbiAgICAgIGlmIChhdXRob3IpIHtcbiAgICAgICAgc2VhcmNoRmlsdGVyID0ge2F1dGhvcn07XG4gICAgICB9XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHNlYXJjaEZpbHRlciA9IHtwYXJlbnR9O1xuICAgICAgfVxuICAgICAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0LmZpbmQoc2VhcmNoRmlsdGVyKVxuICAgICAgICAucG9wdWxhdGUoJ2F1dGhvcicpXG4gICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgcGF0aDogJ3BhcmVudCcsXG4gICAgICAgICAgcG9wdWxhdGU6ICdhdXRob3InLFxuICAgICAgICB9KVxuICAgICAgICAuc29ydCh7Y3JlYXRlZEF0OiAtMX0pXG4gICAgICAgIC5saW1pdCgyMClcbiAgICAgICAgLmV4ZWMoKTtcblxuICAgICAgbGV0IHBvc3RzTGlrZWRCeU1lID0gW107XG4gICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICBwb3N0c0xpa2VkQnlNZSA9IGF3YWl0IExpa2UuZmluZCh7XG4gICAgICAgICAgYXV0aG9yOnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICBwb3N0OnBvc3RzLm1hcChwID0+IHAuX2lkKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBsZXQgaWRzTGlrZWRCeU1lID0gcG9zdHNMaWtlZEJ5TWUubWFwKGxpa2UgPT4gbGlrZS5wb3N0KTtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgcG9zdHMsXG4gICAgICAgIGlkc0xpa2VkQnlNZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICBjb25zdCB7dGV4dCxwYXJlbnQsaW1hZ2VzfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmNyZWF0ZSh7XG4gICAgICBhdXRob3I6c2Vzc2lvbi51c2VyLmlkLFxuICAgICAgdGV4dCxcbiAgICAgIHBhcmVudCxcbiAgICAgIGltYWdlcyxcbiAgICB9KTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnRQb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChwYXJlbnQpO1xuICAgICAgcGFyZW50UG9zdC5jb21tZW50c0NvdW50ID0gYXdhaXQgUG9zdC5jb3VudERvY3VtZW50cyh7cGFyZW50fSk7XG4gICAgICBhd2FpdCBwYXJlbnRQb3N0LnNhdmUoKTtcbiAgICB9XG4gICAgcmVzLmpzb24ocG9zdCk7XG4gIH1cbn0iXSwibmFtZXMiOlsiaW5pdE1vbmdvb3NlIiwiUG9zdCIsInVuc3RhYmxlX2dldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsIkxpa2UiLCJGb2xsb3dlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwibWV0aG9kIiwiaWQiLCJxdWVyeSIsInBvc3QiLCJmaW5kQnlJZCIsInBvcHVsYXRlIiwicGF0aCIsImpzb24iLCJwYXJlbnQiLCJhdXRob3IiLCJzZWFyY2hGaWx0ZXIiLCJteUZvbGxvd3MiLCJmaW5kIiwic291cmNlIiwidXNlciIsImV4ZWMiLCJpZHNPZlBlb3BsZUlGb2xsb3ciLCJtYXAiLCJmIiwiZGVzdGluYXRpb24iLCJwb3N0cyIsInNvcnQiLCJjcmVhdGVkQXQiLCJsaW1pdCIsInBvc3RzTGlrZWRCeU1lIiwicCIsIl9pZCIsImlkc0xpa2VkQnlNZSIsImxpa2UiLCJ0ZXh0IiwiaW1hZ2VzIiwiYm9keSIsImNyZWF0ZSIsInBhcmVudFBvc3QiLCJjb21tZW50c0NvdW50IiwiY291bnREb2N1bWVudHMiLCJzYXZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/posts.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fposts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cposts.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();